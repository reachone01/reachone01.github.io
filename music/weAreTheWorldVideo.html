<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv=Content-Type content=text/html; charset=utf-8>
        <!--charset=utf-8-->
        <title>we are the world-stars</title>
        <style>
   
            <!-- 
			
.container{
width:60%;
margin:auto;
height:600px;
}
.left{
width:60%;
margin:auto;
float:left;
}

.right{
width:40%;
margin:auto;
float:left;
}

.div { 
margin:auto;
width:99.8%;
height:30px; 
overflow-y:scroll; 
padding-top:80px;
text-align:left; 
font-family:mv boli;
padding-left:2px;
 border-bottom:1px solid #eee;border-left:1px solid #eee;
line-height:25px; 
font-size:18px;
padding-bottom:20px;
overflow:hidden;
white-space:nowrap; 
text-overflow:ellipsis;
} 
.playerdiv { 
margin:auto;
width:250px; 

}
body{
margin-top:5px;
}
		
			-->
        </style>


<script language="javascript">
	var scrollt = 0;
	var tflag = 0; //存放时间和歌词的数组的下标
	var lytext = new Array(); //放存汉字的歌词
	var lytime = new Array(); //存放时间
	var delay = 10;
	var line = 0;
	var scrollh = 0;
//2
	function getLy() //取得歌词
	{
		var ly = "[00:00]We Are The World/[00:19]Usa For Africa /[00:21]Written by:Michael Jackson and Lionel Richie /[00:22]singed by:stars/[00:23]/[00:24]There comes a time when we heed a certain call/[00:30]When the world must come together as one/[00:36]There are people dying/[00:41]And it's time to lend a hand to life,/[00:45]The greatest gift of all/[00:50]We can go on pretending day by day/[00:57]That someone, somewhere will soon make a change/[01:04]We are all a part of God's great big family/[01:10]And the truth you know love is all we need/[01:14]/[01:16]We are the world/[01:19]We are the children/[01:22]We are the ones who make a brighter day/[01:25]So let's start giving/[01:29]There's a choice we're making/[01:33]We're saving our own lives/[01:36]It's true we'll make a better day/[01:38]Just you and me/[01:02]/[01:46]Send them your heart so they'll know that someone cares/[01:52]And their lives will be stronger and free/[02:00]As God has shown us by turning stones to bread/[02:06]So we all must lend a helping hand/[02:09]/[02:13]We are the world/[02:15]We are the children/[02:18]We are the ones who make a brighter day/[02:21]So let's start giving/[02:25]There's a choice we're making/[02:20]We're saving our own lives/[02:32]It's true we'll make a better day/[02:34]Just you and me /[02:38]Michael - When you're down and out/[02:40]Michael - There seems no hope at all/[02:45]But if you just believe there's no way we can fall/[02:51]Let us realize that a change can only come/[02:58]When we stand together as one/[03:05.00]We are the world/[03:07]We are the children/[03:12.00]We are the ones who make a brighter day/[03:15.00]so let's start giving/[03:19.00]There's a choice we're making/[03:22.00]We're saving our own lives/[03:26.00]It's true we'll make a better day, Just you and me/[03:31.00]We are the world, We are the children./[03:39.00]We are the ones who make a brighter day/[03:41.00]so let's start giving/[03:45.00]There's a choice we're making/[03:49.00]We're saving our own lives/[03:52.00]It's true we'll make a better day,/[03:55.00] Just you and me/[03:59.00]We are the world, We are the children./[04:04.00]We are the ones who make a brighter day/[04:08.00]so let's start giving/[04:11.00]There's a choice we're making/[04:15.00]We're saving our own lives/[04:19.00]It's true we'll make a better day,/[04:21.00] Just you and me/[04:24.00]We are the world, We are the children./[04:31.00]We are the ones who make a brighter day/[04:35.00]so let's start giving/[04:38.00]There's a choice we're making/[04:42.00]We're saving our own lives/[04:45.00]It's true we'll make a better day,/[04:47.00] Just you and me/[04:51.00]We are the world, We are the children."
	   return ly;}
//9
	function show(t) //显示歌词
	{
		var div1 = document.getElementById("lyr"); //取得层
		document.getElementById("lyr").innerHTML = " "; //每次调用清空以前的一次
		if (t < lytime[lytime.length - 1]) //先舍弃数组的最后一个
		{
			for (var k = 0; k < lytext.length; k++) {
				if (lytime[k] <= t && t < lytime[k + 1]) {
					  scrollh = k * 25; //让当前的滚动条的顶部改变一行的高度
					  div1.innerHTML += "<font color=red style=font-weight:bold>" + lytext[k] + "</font><br>";
				} else if (t < lytime[lytime.length - 1]) //数组的最后一个要舍弃
					  div1.innerHTML += lytext[k] + "<br>";
			}
		} else //加上数组的最后一个
		{
			for (var j = 0; j < lytext.length - 1; j++) 
	div1.innerHTML += lytext[j] + "<br>";
			div1.innerHTML += "<font color=red style=font-weight:bold>" + lytext[lytext.length - 1] + "</font><br>";
		}
	}



//5
	function scrollBar() //设置滚动条的滚动
	{
		if (document.getElementById("lyr").scrollTop <= scrollh) 
	document.getElementById("lyr").scrollTop +=25;
		if (document.getElementById("lyr").scrollTop >= scrollh + 50) 
	document.getElementById("lyr").scrollTop -=25;
		window.setTimeout("scrollBar()", delay);
	}

//1
	function getReady() //在显示歌词前做好准备工作
	{
		var ly = getLy(); //得到歌词 2
		//alert(ly);
		var arrly = ly.split("/"); //转化成数组
		for (var i = 0; i < arrly.length; i++) 
	sToArray(arrly[i]);	//循环执行左边函数 3
		sortAr();



		/*for(var j=0;j<lytext.length;j++)
{
	document.getElementById("lyr").innerHTML+=lytime[j]+lytext[j]+"<br>";
}*/
		scrollBar();  //5
	}



//3
	function sToArray(str) //解析如“[02:02][00:24]没想到是你”的字符串前放入数组
	{
		var left = 0; //"["的个数
		var leftAr = new Array();
		for (var k = 0; k < str.length; k++) {
			if (str.charAt(k) == "[") {
				leftAr[left] = k;
				left++;
			}
		}
		if (left != 0) {
			for (var i = 0; i < leftAr.length; i++) {
				lytext[tflag] = str.substring(str.lastIndexOf("]") + 1); //放歌词,tflag的初始值是0
				lytime[tflag] = conSeconds(str.substring(leftAr[i] + 1, leftAr[i] + 6)); //放时间，conSeconds()是自定义函数；4
				tflag++;
			}
		}
		//alert(str.substring(leftAr[0]+1,leftAr[0]+6));
	}





	function sortAr() //按时间重新排序时间和歌词的数组
	{
		var temp = null;
		var temp1 = null;
		for (var k = 0; k < lytime.length; k++) {
			for (var j = 0; j < lytime.length - k; j++) {
				if (lytime[j] > lytime[j + 1]) {
					temp = lytime[j];
					temp1 = lytext[j];
					lytime[j] = lytime[j + 1];
					lytext[j] = lytext[j + 1];
					lytime[j + 1] = temp;
					lytext[j + 1] = temp1;
				}
			}
		}
	}


//4
	function conSeconds(t) //把形如：01:25的时间转化成秒；
	{
		var m = t.substring(0, t.indexOf(":"));
		var s = t.substring(t.indexOf(":") + 1);
		s = parseInt(s.replace(/\b(0+)/gi, ""));
		if (isNaN(s)) s = 0;
		var totalt = parseInt(m) * 60 + s;
		//alert(parseInt(s.replace(/\b(0+)/gi,"")));
		if (isNaN(totalt)) return 0;
		return totalt;
	}


//7
	function getSeconds() //得到当前播放器播放位置的时间
	{
		var t = getPosition();
		t = t.toString(); //数字转换成字符串
		var s = t.substring(0, t.lastIndexOf(".")); //得到当前的秒
		//alert(s);
		return s;
	}





//8

	function getPosition() //返回当前播放的时间位置
	{
		var mm = document.getElementById("Player12");
		//var mmt=;
		//alert(mmt);
		return mm.controls.CurrentPosition;
	}


//6
	function mPlay() //开始播放
	{
		var ms = parseInt(getSeconds());
		if (isNaN(ms)) 
	show(0);
		else 
	show(ms);
		window.setTimeout("mPlay()", 100)
	}


//6
	window.setTimeout("mPlay()", 100) 

function test() //测试使用，
	{
		alert(lytime[lytime.length - 1]);
	}
</script>
    </head>
    
<body onLoad="getReady()">

<div class="container">

<object id="Player12" height="490" width="100%" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6">
<param name="AutoStart" value="0" />
<!--是否自动播放-->
<param name="Balance" value="0" />
<!--调整左右声道平衡,同上面旧播放器代码-->
<param name="enabled" value="-1" />
<!--播放器是否可人为控制-->
<param name="EnableContextMenu" value="-1" />
<!--是否启用上下文菜单-->
<param name="url" value="weworld词清晰.f4v" />
<!--播放的文件地址-->
<param name="PlayCount" value="1" />
<!--播放次数控制,为整数-->
<param name="rate" value="1" />
<!--播放速率控制,1为正常,允许小数,1.0-2.0-->
<param name="currentPosition" value="23" />
<!--控件设置:当前位置-->
<param name="currentMarker" value="0" />
<!--控件设置:当前标记-->
<param name="defaultFrame" value="" />
<!--显示默认框架-->
<param name="invokeURLs" value="0" />
<!--脚本命令设置:是否调用URL-->
<param name="baseURL" value="" />
<!--脚本命令设置:被调用的URL-->
<param name="stretchToFit" value="1" />
<!--是否按比例伸展-->
<param name="volume" value="50" />
<!--默认声音大小0%-100%,50则为50%-->
<param name="mute" value="0" />
<!--是否静音-->
<param name="uiMode" value="full" />
<!--播放器显示模式:Full显示全部;mini最简化;None不显示播放控制,只显示视频窗口;invisible全部不显示-->
<param name="windowlessVideo" value="0" />
<!--如果是0可以允许全屏,否则只能在窗口中查看-->
<param name="fullScreen" value="0" />
<!--开始播放是否自动全屏-->
<param name="enableErrorDialogs" value="-1" />
<!--是否启用错误提示报告-->
<param name="SAMIStyle" value="value" />
<!--SAMI样式-->
<param name="SAMILang" value="value" />
<!--SAMI语言-->
<param name="SAMIFilename" value="value" />
<!--字幕ID-->
</object>

	
<div id="lyr" class="div">
        歌词加载中……
</div>
<br />
<video controls="controls">
  <source src="weworld词清晰.f4v" type="video/ogg">
  <source src="weworld词清晰.f4v" type="video/f4v">
  Your browser does not support the video tag.
</video> 

<p>We Are The World</p>

<p>Usa For Africa </p>

<p>Written by:Michael Jackson and Lionel Richie </p>

<p>singed by:stars</p>

<p></p>

<p>There comes a time when we heed a certain call</p>

<p>When the world must come together as one</p>

<p>There are people dying</p>

<p>And it's time to lend a hand to life,</p>

<p>The greatest gift of all</p>

<p>We can go on pretending day by day</p>

<p>That someone, somewhere will soon make a change</p>

<p>We are all a part of God's great big family</p>

<p>And the truth you know love is all we need</p>

<p></p>

<p>We are the world</p>

<p>We are the children</p>

<p>We are the ones who make a brighter day</p>

<p>So let's start giving</p>

<p>There's a choice we're making</p>

<p>We're saving our own lives</p>

<p>It's true we'll make a better day</p>

<p>Just you and me</p>

<p></p>

<p>Send them your heart so they'll know that someone cares</p>

<p>And their lives will be stronger and free</p>

<p>As God has shown us by turning stones to bread</p>

<p>So we all must lend a helping hand</p>

<p></p>

<p>We are the world</p>

<p>We are the children</p>

<p>We are the ones who make a brighter day</p>

<p>So let's start giving</p>

<p>There's a choice we're making</p>

<p>We're saving our own lives</p>

<p>It's true we'll make a better day</p>

<p>Just you and me </p>

<p>Michael - When you're down and out</p>

<p>Michael - There seems no hope at all</p>

<p>But if you just believe there's no way we can fall</p>

<p>Let us realize that a change can only come</p>

<p>When we stand together as one</p>

<p>We are the world</p>

<p>We are the children</p>

<p>We are the ones who make a brighter day</p>

<p>so let's start giving</p>

<p>There's a choice we're making</p>

<p>We're saving our own lives</p>

<p>It's true we'll make a better day, Just you and me</p>

<p>We are the world, We are the children.</p>

<p>We are the ones who make a brighter day</p>

<p>so let's start giving</p>

<p>There's a choice we're making</p>

<p>We're saving our own lives</p>

<p>It's true we'll make a better day,</p>

<p> Just you and me</p>

<p>We are the world, We are the children.</p>

<p>We are the ones who make a brighter day</p>

<p>so let's start giving</p>

<p>There's a choice we're making</p>

<p>We're saving our own lives</p>

<p>It's true we'll make a better day,</p>

<p> Just you and me</p>

<p>We are the world, We are the children.</p>

<p>We are the ones who make a brighter day</p>

<p>so let's start giving</p>

<p>There's a choice we're making</p>

<p>We're saving our own lives</p>

<p>It's true we'll make a better day,</p>

<p> Just you and me</p>

<p>We are the world, We are the children.</p>


</div>
 </body>

</html>